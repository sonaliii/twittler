<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
      <style type="text/css">
          h1 {color: #00CCFF; text-align: center;}
          body {background-color: #000000; font-family: "Trebuchet MS"; color: #66FFFF;}
      </style>


  </head>
  <body>

    <script>


      $(document).ready(function(){
          setInterval(function() {
        var $h1 = $('h1');
              $h1.html('');
        var $body = $('body');
        $body.html('<h1>Twittler</h1> <hr border-color = #00CCFF; size = 4>');

        var index = streams.home.length - 1;
        while(index >= 0){

          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          var hours = tweet.created_at.getHours();
          var minutes = tweet.created_at.getMinutes();
          var seconds = tweet.created_at.getSeconds();
          var tweet_time = String(hours + ':' + minutes + ':' + seconds);
          var $username = $('<div class = "username"></div>');
          $username.text('@' + tweet.user);


          $tweet.text(': ' + tweet.message + ' (' + tweet_time + ')');
          $username.prependTo($tweet);
          $tweet.appendTo($body);

            $('.username').on('click', function() {
                $body.empty();
                var $history = $('<div></div>');
                var username = streams.users[tweet.user];
                for (var i = 0; i < username.length; i++) {

                    var tweet_hours = username[i].created_at.getHours();
                    var tweet_mins = username[i].created_at.getMinutes();
                    var tweet_created = String(tweet_hours + ':' + tweet_mins);
                    $history.text(tweet.user + ': ' + tweet.message + ' (' + tweet_created + ')');
                    $history.appendTo($body);
                }

            })


            index -= 1;
        }
          }, 1000);
      });

    </script>

  </body>
</html>
